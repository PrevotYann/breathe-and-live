<form class="{{cssClass}} breathe-weapon-sheet" autocomplete="off">
  <header class="sheet-header flexrow">
    <img class="profile-img" src="{{item.img}}" data-edit="img" title="{{item.name}}" />
    <div class="header-fields">
      <h1><input name="name" type="text" value="{{item.name}}" placeholder="Nom de l'arme" /></h1>
      <div class="grid-2col">
        <div>
          <label>Cat√©gorie</label>
          <select name="system.categorie">
            {{#each categorieList as |label key|}}
              <option value="{{key}}" {{#if (eq key ../system.categorie)}}selected{{/if}}>{{label}}</option>
            {{/each}}
          </select>
        </div>
        <div>
          <label>Type</label>
          <input type="text" name="system.typeArme" value="{{system.typeArme}}" placeholder="nichirin / maul / fouet‚Ä¶" />
        </div>
      </div>
    </div>
  </header>

  <!-- Onglets -->
  <nav class="sheet-tabs tabs" data-group="primary">
    <a class="item" data-tab="resume">R√©sum√©</a>
    <a class="item" data-tab="jets">Jets</a>
    <a class="item" data-tab="props">Propri√©t√©s</a>
    <a class="item" data-tab="munitions">Munitions</a>
  </nav>

  <section class="sheet-body">
    <!-- R√©sum√© -->
    <div class="tab" data-group="primary" data-tab="resume">
      <h2>Description</h2>
      <textarea name="system.notes" rows="4" placeholder="Notes sur l'arme (ex: √©carlate, dents de scie, poison auto‚Ä¶)">{{system.notes}}</textarea>

      <div class="grid-3col" style="margin-top:.5rem;">
        <div>
          <label>Port√©e</label>
          <input type="text" name="system.portee" value="{{system.portee}}" placeholder="1.5 m / 3 m / 9 m‚Ä¶" />
        </div>
        <div>
          <label>D√©g√¢ts</label>
          <input type="text" name="system.degats" value="{{system.degats}}" placeholder="ex: 1d6 / 2d10" />
        </div>
        <div>
          <label>Type d‚Äôarme</label>
          <input type="text" name="system.typeArme" value="{{system.typeArme}}" />
        </div>
      </div>
    </div>

    <!-- Jets -->
    <div class="tab" data-group="primary" data-tab="jets">
      <h2>Jets</h2>
      <div class="grid-2col">
        <div>
          <label>Mod. Attaque</label>
          <select name="system.modAttaque">
            {{#each statsList as |label key|}}
              <option value="{{key}}" {{#if (eq key ../system.modAttaque)}}selected{{/if}}>{{label}}</option>
            {{/each}}
          </select>
        </div>
        <div>
          <label>Mod. D√©g√¢ts</label>
          <select name="system.modDegats">
            {{#each statsList as |label key|}}
              <option value="{{key}}" {{#if (eq key ../system.modDegats)}}selected{{/if}}>{{label}}</option>
            {{/each}}
          </select>
        </div>
      </div>

      <div style="display:flex; gap:.5rem; margin-top:.5rem;">
        <a class="weapon-roll-attack button">üé≤ Jet d'attaque</a>
        <a class="weapon-roll-damage button">üí• Jet de d√©g√¢ts</a>
      </div>
    </div>

    <!-- Propri√©t√©s -->
    <div class="tab" data-group="primary" data-tab="props">
      <h2>Propri√©t√©s (tags)</h2>
      <p class="hint">Saisis une liste s√©par√©e par des virgules (ex: d√©capitation, √©carlate, saignement)</p>
      <input type="text" name="system.proprietesStr" value="{{join system.proprietes ', '}}" placeholder="d√©capitation, √©carlate, ..." />
      <p style="margin-top:.3rem;">Exemples :  
        ‚Ä¢ <b>√©carlate</b> (Lame rouge) ‚Äî entrave r√©g√©n√©ration d√©moniaque  
        ‚Ä¢ <b>d√©capitation</b> ‚Äî peut d√©capiter (vs d√©mons)  
        ‚Ä¢ <b>poison auto</b> ‚Äî lame qui s‚Äôenduit de poison √† l‚Äô√©tui
      </p>
    </div>

    <!-- Munitions -->
    <div class="tab" data-group="primary" data-tab="munitions">
      <h2>Munitions (pour armes √† feu / jets)</h2>
      <div class="grid-3col">
        <div>
          <label>Utilise des munitions</label>
          <input type="checkbox" name="system.munitions.utilise" {{checked system.munitions.utilise}} />
        </div>
        <div>
          <label>Charge</label>
          <input type="number" name="system.munitions.charge" value="{{system.munitions.charge}}" />
        </div>
        <div>
          <label>Charge max</label>
          <input type="number" name="system.munitions.chargeMax" value="{{system.munitions.chargeMax}}" />
        </div>
      </div>
      <div>
        <label>R√®gle de rechargement</label>
        <input type="text" name="system.munitions.rechargement" value="{{system.munitions.rechargement}}" placeholder="ex: Action compl√®te pour recharger‚Ä¶" />
      </div>
    </div>
  </section>
</form>
